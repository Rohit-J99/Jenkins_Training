pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                echo 'Building..'
            }
        }
        stage('parallel stages') {
        parallel {
            stage('build') {
            steps {
                echo 'parallely building!'
            }
            }
            stage('test') {
            steps {
                echo 'parallely testing!'
            }
            }
        }
        }
  
        stage('Test') {
            steps {
                echo 'Testing.....'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying.....'
            }
        }
    }
        post {
        success{
            echo 'Build successful'
        }
        failure {
            echo 'Build failed'
        }
    }
}






// pipeline {

//     agent any
//     environment {
//         NEW_VERSION = '1.1.0'
//     }
    
//     stages {
    
//         stage("build") {

//              when {
//                 expression {
//                     BRANCH_NAME = 'main' && NEW_VERSION >= '1.1.0' 
//                 }
//             }
        
//             steps {
//                 echo 'building the application...'
//             }
//         }
        
//         stage("test") {
        
//             when {
//                 expression {
//                     BRANCH_NAME = 'test' 
//                 }
//             }
//             steps {
//                 echo 'testing the application...'
//             }
//         }

        
//         stage("deploy") {

//              when {
//                 expression {
//                     BRANCH_NAME = 'dev' || BRANCH_NAME = 'main'
//                 }
//             }
        
//             steps {
//                 echo 'deploying the application...'
//                 echo "deploying version ${NEW_VERSION}"
//             }
//         }
//     } 
//     post {
//         success{
//             echo 'Build successful'
//         }
//         failure {
//             echo 'Build failed'
//         }
//     }
// }

